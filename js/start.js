system42("start",(function(n){"use strict";function s(t,e){var i=[],o=[];for(var c in t)if(t.hasOwnProperty(c)&&"."!==c&&".."!==c)if("number"==typeof t[c]){var r=$fs.utils.getInfo(c),u=$fs.utils.getOpeners(c);i.push({name:c,icon:r.icon,action:function(n,s,t){return function(){$exe(t[0]+" "+e+n)}}(c,0,u)})}else($io.is.obj(t[c])||$io.is.arr(t[c]))&&o.push({name:c,icon:"/c/sys/skins/"+n._settings.skin+"/places/16/folder.png",items:function(n,t){return function(){return s(n,t)}}(t[c],e+c+"/")});return o.sort().concat(i.sort())}var t,e,i={find:function(){$alert("<b>Did you know ?</b><br>You can use Find to locate your real father.<br>But I will save you the trouble.<br><b>Windows 93 is your real father.</b>")},help:function(){$window({title:"Help",url:"//www.windows93.net/wiki/93.php?Home",width:800,height:600})},run:function(){$alert.error("There is nowhere you can run")},reboot:function(){$exe("reboot")},settings:function(){$window({title:"Settings",html:$form.build(n._settings).el,width:400,btnOk:"OK",btnCancel:"Cancel"})},format:function(){$exe("format")},fullscreen:function(){$fullscreen()},shutdown:function(){$exe("shutdown")}},o=[{name:"Programs",icon:"/c/sys/skins/"+n._settings.skin+"/programs.png",items:function(){return s=n._apps,t=[],e=[],i=Object.keys(s),$io.arr.all(i.sort(),(function(i){if(s[i]&&s[i].exec){var o=s[i].name?i+' <em class="startmenu_cmd">('+s[i].name+")</em>":i,c=s[i].icon||"/c/sys/skins/"+n._settings.skin+"/programs.png";0!==c.indexOf("/")&&(c="/c/sys/skins/"+n._settings.skin+"/"+c),(s[i].cmd?t:e).push({name:o,icon:c,action:function(n){return function(){$exe(n)}}(i)})}})),e;var s,t,e,i}},{name:"Documents",icon:"/c/sys/skins/"+n._settings.skin+"/documents.png",items:function(){return s(n._files.c,"c/")}},{name:"Fullscreen",icon:"/c/sys/skins/"+n._settings.skin+"/shutdown.png",action:i.fullscreen},{name:"Find",icon:"/c/sys/skins/"+n._settings.skin+"/find.png",action:i.find},{name:"Help",icon:"/c/sys/skins/"+n._settings.skin+"/help.png",action:i.help},{name:"Run...",icon:"/c/sys/skins/"+n._settings.skin+"/run.png",action:i.run},{name:"---"},{name:"Reinstall",icon:"/c/sys/skins/"+n._settings.skin+"/install.png",action:i.format},{name:"---"},{name:"Reboot...",icon:"/c/sys/skins/"+n._settings.skin+"/shutdown.png",action:i.reboot},{name:"Shutdown",icon:"/c/sys/skins/"+n._settings.skin+"/shutdown.png",action:i.shutdown}];$menu(document.getElementById("s42_start"),o,{mode:"popup",position:{within:n._dom.desktop}}),(e=n._dom.clock)&&function n(){var s=new Date,i=s.getHours(),o=s.getMinutes();t!==(i=(i<10?"0":"")+i)+":"+(o=(o<10?"0":"")+o)&&(t=i+":"+o,e.textContent=t,e.title=s),setTimeout(n,1e4)}()}));